# ã‚·ãƒ³ãƒ—ãƒ«ãªåŸ‹ã‚è¾¼ã¿å›½éš›åŒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚åŸ‹ã‚è¾¼ã¿ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ è¨€èªåˆ‡ã‚Šæ›¿ãˆã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã€éå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«ãªRustå›½éš›åŒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

## ç‰¹å¾´

- ğŸš€ **ä½¿ã„ã‚„ã™ã„** - ãŸã£ãŸ3ã¤ã®APIï¼šç¿»è¨³ç™»éŒ²ã€è¨€èªè¨­å®šã€ç¿»è¨³å–å¾—
- ğŸ“¦ **ã‚¼ãƒ­ä¾å­˜** - å¤–éƒ¨ä¾å­˜ãªã—ã€ç´”ç²‹ãªRustå®Ÿè£…
- ğŸ”’ **ã‚¿ã‚¤ãƒ—ã‚»ãƒ¼ãƒ•** - ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ãƒã‚§ãƒƒã‚¯ã€æ„å›³ã—ãªã„ä¸Šæ›¸ãã‚’é˜²æ­¢
- ğŸŒ **å¤šè¨€èªå¯¾å¿œ** - ä»»æ„ã®è¨€èªã‚³ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆï¼ˆzh-CNã€en-USã€ja-JPãªã©ï¼‰
- ğŸ”„ **è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯** - ç¾åœ¨ã®è¨€èª â†’ è‹±èª â†’ æœ€åˆã®åˆ©ç”¨å¯èƒ½ãªç¿»è¨³
- ğŸ›¡ï¸ **å®‰å…¨æ©Ÿæ§‹** - é‡è¤‡ã‚­ãƒ¼æ¤œå‡ºã€æ„å›³ã—ãªã„ä¸Šæ›¸ãã‚’é˜²æ­¢
- ğŸ’¬ **å›½éš›åŒ–ã‚¨ãƒ©ãƒ¼** - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è‡ªä½“ãŒå¤šè¨€èªã‚’ã‚µãƒãƒ¼ãƒˆ

## ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 

```toml
[dependencies]
rat_embed_lang = "0.1.0"
```

### 2. åŸºæœ¬çš„ãªä½¿ã„æ–¹

è©³ç´°ãªä½¿ç”¨ä¾‹ã¯ `examples/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‚ç…§ï¼š

- `basic_usage.rs` - åŸºæœ¬çš„ãªå¤šè¨€èªä½¿ç”¨
- `duplicate_key_test.rs` - é‡è¤‡ã‚­ãƒ¼æ¤œå‡ºã¨ã‚¨ãƒ©ãƒ¼å‡¦ç†
- `parameterized_translation.rs` - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ç¿»è¨³ã¨å‹•çš„ãƒ†ã‚­ã‚¹ãƒˆç½®æ›

ã‚µãƒ³ãƒ—ãƒ«å®Ÿè¡Œï¼š
```bash
cargo run --example basic_usage
cargo run --example parameterized_translation
```

## APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### ã‚³ã‚¢API

| é–¢æ•° | èª¬æ˜ |
|------|------|
| `register_translations(translations)` | ç¿»è¨³ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ² |
| `set_language(lang)` | ç¾åœ¨ã®è¨€èªã‚’è¨­å®š |
| `t(key)` | ç¾åœ¨ã®è¨€èªã§ç¿»è¨³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾— |
| `tf(key, args)` | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ç¿»è¨³ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾— |

### ãƒ˜ãƒ«ãƒ‘ãƒ¼API

| é–¢æ•° | èª¬æ˜ |
|------|------|
| `current_language()` | ç¾åœ¨ã®è¨€èªã‚’å–å¾— |
| `clear_translations()` | ç™»éŒ²æ¸ˆã¿ã®ã™ã¹ã¦ã®ç¿»è¨³ã‚’ã‚¯ãƒªã‚¢ |
| `t_with_lang(key, lang)` | æŒ‡å®šã•ã‚ŒãŸè¨€èªã§ç¿»è¨³ã‚’å–å¾— |
| `tf_with_lang(key, lang, args)` | æŒ‡å®šè¨€èªã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ç¿»è¨³ã‚’å–å¾— |
| `has_translation(key)` | ç¿»è¨³ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ |
| `get_all_keys()` | ã™ã¹ã¦ã®ç¿»è¨³ã‚­ãƒ¼ã‚’å–å¾— |

### è¨€èªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

| é–¢æ•° | èª¬æ˜ |
|------|------|
| `normalize_language_code(code)` | è¨€èªã‚³ãƒ¼ãƒ‰ã‚’æ­£è¦åŒ– |
| `get_language_from_env()` | ç’°å¢ƒå¤‰æ•°ã‹ã‚‰è¨€èªè¨­å®šã‚’å–å¾— |

## ä½¿ç”¨ã‚¬ã‚¤ãƒ‰

### ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨€èªæ¤œå‡º

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯ä»¥ä¸‹ã®å„ªå…ˆé †ä½ã§è¨€èªã‚’æ¤œå‡ºã—ã¾ã™ï¼š
1. `RAT_LANG` - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®è¨€èªè¨­å®š
2. `LANG` - ã‚·ã‚¹ãƒ†ãƒ è¨€èªç’°å¢ƒå¤‰æ•°
3. `en-US` - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè‹±èª

```rust
// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®è¨€èªè¨­å®šã‚’ä½¿ç”¨
std::env::set_var("RAT_LANG", "zh-CN");
let lang = get_language_from_env(); // "zh-CN"ã‚’è¿”ã™
```

### ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿæ§‹

è¦æ±‚ã•ã‚ŒãŸç¿»è¨³ãŒå­˜åœ¨ã—ãªã„å ´åˆã€ä»¥ä¸‹ã®é †åºã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¾ã™ï¼š
1. ç¾åœ¨ã®è¨€èªã®ç¿»è¨³
2. è‹±èªç¿»è¨³ï¼ˆ`en-US`ï¼‰
3. æœ€åˆã®åˆ©ç”¨å¯èƒ½ãªç¿»è¨³
4. `[key]`å½¢å¼ã®ã‚­ãƒ¼åã‚’è¿”ã™

```rust
// ç¾åœ¨ã®è¨€èªãŒ"fr-FR"ã ãŒä¸­å›½èªã¨è‹±èªã®ç¿»è¨³ã—ã‹å­˜åœ¨ã—ãªã„å ´åˆ
set_language("fr-FR");
println!("{}", t("hello")); // è‹±èªã®"Hello"ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
```

### é‡è¤‡ã‚­ãƒ¼ä¿è­·

ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¯é‡è¤‡ã™ã‚‹ç¿»è¨³ã‚­ãƒ¼ã‚’æ¤œå‡ºã—ã€æ„å›³ã—ãªã„ä¸Šæ›¸ãã‚’é˜²æ­¢ã—ã¾ã™ï¼š

```rust
// æœ€åˆã®ç™»éŒ²
register_translations(translations1); // âœ… æˆåŠŸ

// é‡è¤‡ã‚­ãƒ¼ã‚’å«ã‚€2å›ç›®ã®ç™»éŒ²
register_translations(translations2); // âŒ ãƒ‘ãƒ‹ãƒƒã‚¯ï¼šé‡è¤‡ã‚­ãƒ¼æ¤œå‡º

// æ­£ã—ã„å†ç™»éŒ²æ–¹æ³•
clear_translations(); // æœ€åˆã«ã‚¯ãƒªã‚¢
register_translations(translations2); // âœ… æˆåŠŸ
```

### å›½éš›åŒ–ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ç¾åœ¨ã®è¨€èªç’°å¢ƒã«åŸºã¥ã„ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```rust
set_language("zh-CN");
// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼šç¿»è¯‘keyé‡å¤: hello, world. è¯·æ£€æŸ¥...

set_language("en-US");
// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼šDuplicate translation keys: hello, world. Please check...
```

## é«˜åº¦ãªä½¿ã„æ–¹

### ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼ç¿»è¨³

ç¿»è¨³ã‚’è¤‡æ•°ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã«åˆ†å‰²ã§ãã¾ã™ï¼š

```rust
// ui_translations.rs
pub fn get_ui_translations() -> HashMap<String, HashMap<String, String>> {
    let mut translations = HashMap::new();

    let mut button_ok = HashMap::new();
    button_ok.insert("zh-CN", "ç¡®å®š".to_string());
    button_ok.insert("en-US", "OK".to_string());
    translations.insert("button_ok".to_string(), button_ok);

    translations
}

// main.rs
register_translations(get_ui_translations());
register_translations(get_error_translations());
```

### å‹•çš„è¨€èªåˆ‡ã‚Šæ›¿ãˆ

```rust
fn switch_language(lang: &str) {
    set_language(lang);
    // ã™ã¹ã¦ã®ç¿»è¨³å‘¼ã³å‡ºã—ãŒæ–°ã—ã„è¨€èªã‚’ä½¿ç”¨
    update_ui();
}
```

## ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ

`examples/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å®Œå…¨ãªã‚µãƒ³ãƒ—ãƒ«ã‚’å‚ç…§ï¼š

- `basic_usage.rs` - åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹
- `duplicate_key_test.rs` - é‡è¤‡ã‚­ãƒ¼æ¤œå‡ºãƒ†ã‚¹ãƒˆ

ã‚µãƒ³ãƒ—ãƒ«å®Ÿè¡Œï¼š
```bash
cargo run --example basic_usage
cargo run --example duplicate_key_test
```

## è¨­è¨ˆå“²å­¦

### ã‚·ãƒ³ãƒ—ãƒ«ã•ç¬¬ä¸€
- ã‚³ã‚¢æ©Ÿèƒ½ã®ã¿ã‚’æä¾›
- è¤‡é›‘ãªãƒã‚¯ãƒ­ã‚„è¨­å®šãªã—
- ç›´æ¥çš„ãªHashMapä½¿ç”¨ã€å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„

### å®‰å…¨ã§ä¿¡é ¼æ€§
- é‡è¤‡ã‚­ãƒ¼æ¤œå‡ºãŒæ„å›³ã—ãªã„ä¸Šæ›¸ãã‚’é˜²æ­¢
- ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ãªçŠ¶æ…‹ç®¡ç†
- æ˜ç¢ºãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

### æŸ”è»Ÿã§æ‹¡å¼µå¯èƒ½
- ä»»æ„ã®è¨€èªã‚³ãƒ¼ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç¿»è¨³ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’å®Œå…¨ã«åˆ¶å¾¡
- æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¸ã®çµ±åˆãŒå®¹æ˜“

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

LGPL v3

## è²¢çŒ®

Issueã¨Pull Requestã‚’æ­“è¿ã—ã¾ã™ï¼

## å¤‰æ›´ãƒ­ã‚°

### v0.1.0
- åˆæœŸãƒãƒ¼ã‚¸ãƒ§ãƒ³
- åŸºæœ¬çš„ãªå¤šè¨€èªã‚µãƒãƒ¼ãƒˆ
- é‡è¤‡ã‚­ãƒ¼æ¤œå‡º
- å›½éš›åŒ–ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸